<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PROKART CALETENSE | Campeonato Oficial</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;500;700&display=swap" rel="stylesheet">

<style>
:root{--rojo:#e10600;--negro:#111;--gris:#f4f4f4}
*{box-sizing:border-box}
body{margin:0;font-family:'Oswald',Arial;background:var(--gris)}

/* HEADER */
header{
  background:
    linear-gradient(rgba(0,0,0,.75), rgba(0,0,0,.75)),
    url("img/23610.jpg") center/cover no-repeat;
  color:#fff;
  text-align:center;
  padding:120px 20px;
}
header img{max-width:320px;width:90%}

/* NAV */
nav{
  position:sticky;
  top:0;
  background:var(--negro);
  display:flex;
  justify-content:center;
  gap:25px;
  padding:15px;
  z-index:10
}
nav a{color:#fff;text-decoration:none}
nav a:hover{color:var(--rojo)}

/* SECCIONES */
section{max-width:1100px;margin:auto;padding:60px 20px}
h2{border-left:6px solid var(--rojo);padding-left:15px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
.card{background:#fff;padding:25px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.btn{display:inline-block;margin:10px 0 20px;padding:12px 18px;background:var(--rojo);color:#fff;text-decoration:none;border-radius:6px}
.btn:hover{opacity:.85}

/* TABLAS */
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{padding:12px;border-bottom:1px solid #ddd}
th{background:var(--negro);color:#fff}

#tablaGeneral{margin-top:30px;background:#fff;border-radius:10px;overflow:hidden}
#tablaGeneral th{text-align:center;letter-spacing:1px}
#tablaGeneral td{text-align:center;font-weight:500}
#tablaGeneral td:nth-child(2){text-align:left;padding-left:20px}
#tablaGeneral tbody tr:nth-child(1){background:#ffd70033;font-weight:700}
#tablaGeneral tbody tr:nth-child(2){background:#c0c0c033}
#tablaGeneral tbody tr:nth-child(3){background:#cd7f3233}
#tablaGeneral tbody tr:hover{background:#f1f1f1}

/* ACLARACION */
#aclaracion{background:#fff;border-top:4px solid var(--rojo);text-align:center}

/* INSTITUCIONAL */
.institucional{text-align:center;padding:60px 20px;background:#fff}
.institucional h2{margin-bottom:40px;border-left:5px solid var(--rojo);display:inline-block;padding-left:12px}
.logos-federaciones{display:flex;justify-content:center;flex-wrap:wrap;gap:40px}
.logos-federaciones img{height:90px;object-fit:contain;filter:grayscale(100%);transition:.3s}
.logos-federaciones img:hover{filter:grayscale(0%);transform:scale(1.05)}

/* FOOTER */
.footer{background:var(--negro);color:#fff;text-align:center;padding:40px 20px;margin-top:40px}
.sponsors img{height:45px;margin:0 10px}
</style>
</head>

<body>

<header>
  <img src="ProKart.jpg" alt="PROKART CALETENSE">
  <h1>PROKART CALETENSE</h1>
  <p>Temporada Oficial 2026</p>
  <p class="slogan">Velocidad â€¢ PasiÃ³n â€¢ Competencia</p>

</header>

<nav>
  <a href="#fechas">Fechas</a>
  <a href="#categorias">CategorÃ­as</a>
  <a href="#posiciones">Resultados</a>
  <a href="campeonato.html">Campeonato</a>
  <a href="#inscripcion">Inscripciones</a>
</nav>

<!-- ================= FECHAS ================= -->
<section id="fechas">
<h2>Calendario Oficial 2026</h2>
<div class="grid">

<a href="fecha.html?fecha=Fecha%201" class="card"><h3>Fecha 1 - Apertura</h3><p>ğŸ“… 8 de Marzo</p><p>ğŸ“ Pico Truncado</p></a>
<a href="fecha.html?fecha=Fecha%202" class="card"><h3>Fecha 2</h3><p>ğŸ“… 5 de Abril</p><p>ğŸ“ Pico Truncado</p></a>
<a href="fecha.html?fecha=Fecha%203" class="card"><h3>Fecha 3 - Fecha Doble</h3><p>ğŸ“… 2 de Mayo</p><p>ğŸ“ Caleta Olivia</p></a>
<a href="fecha.html?fecha=Fecha%204" class="card"><h3>Fecha 4 - Fecha Doble</h3><p>ğŸ“… 3 de Mayo</p><p>ğŸ“ Caleta Olivia</p></a>
<a href="fecha.html?fecha=Fecha%205" class="card"><h3>Fecha 5</h3><p>ğŸ“… 7 de Junio</p><p>ğŸ“ Caleta Olivia</p></a>
<a href="fecha.html?fecha=Fecha%206" class="card"><h3>Fecha 6</h3><p>ğŸ“… 2 de Agosto</p><p>ğŸ“ Las Heras</p></a>
<a href="fecha.html?fecha=Fecha%207" class="card"><h3>Fecha 7- Fecha Doble</h3><p>ğŸ“… 6 de Setiembre</p><p>ğŸ“ Puerto Deseado</p></a>
<a href="fecha.html?fecha=Fecha%208" class="card"><h3>Fecha 8- Fecha Doble</h3><p>ğŸ“… 7 de Setiembre</p><p>ğŸ“ Puerto Deseado</p></a>
<a href="fecha.html?fecha=Fecha%209" class="card"><h3>Fecha 9</h3><p>ğŸ“… 4 de Octubre</p><p>ğŸ“ Las Heras</p></a>
<a href="fecha.html?fecha=Fecha%209" class="card"><h3>Fecha 10 - Cierre</h3><p>ğŸ“…1 de Novienbre</p><p>ğŸ“ Caleta Olivia</p></a>
</div>
</section>

<!-- ================= CATEGORIAS ================= -->
<section id="categorias">
<h2>CategorÃ­as</h2>

<div class="card"><h3>PRE JUNIOR</h3><p><strong>Reglamento:</strong> CategorÃ­a formativa destinada a pilotos en etapa inicial.</p><a class="btn" href="reglamentos/Reglamento_PRE_JUNIOR.pdf" target="_blank">Descargar Reglamento PDF</a><h4>Pilotos Rankeados</h4><div class="grid"></div></div>

<div class="card"><h3>JUNIOR</h3><p><strong>Reglamento:</strong> CategorÃ­a juvenil competitiva.</p><a class="btn" href="reglamentos/Reglamento_JUNIOR.pdf" target="_blank">Descargar Reglamento PDF</a><h4>Pilotos Rankeados</h4><div class="grid"></div></div>

<div class="card"><h3>110 Cajeros</h3><p><strong>Reglamento:</strong> Motores 110cc â€“ preparaciÃ³n controlada.</p><a class="btn" href="reglamentos/Reglamento_110_Cajeros.pdf" target="_blank">Descargar Reglamento PDF</a><h4>Pilotos Rankeados</h4><div class="grid"></div></div>

<div class="card"><h3>200 Master</h3><p><strong>Reglamento:</strong> CategorÃ­a para pilotos experimentados.</p><a class="btn" href="reglamentos/Reglamento_200_Master.pdf" target="_blank">Descargar Reglamento PDF</a><h4>Pilotos Rankeados</h4><div class="grid"></div></div>

<div class="card"><h3>200 STD</h3><p><strong>Reglamento:</strong> CategorÃ­a estÃ¡ndar â€“ igualdad mecÃ¡nica.</p><a class="btn" href="reglamentos/Reglamento_200_STD.pdf" target="_blank">Descargar Reglamento PDF</a><h4>Pilotos Rankeados</h4><div class="grid"></div></div>

</section>

<!-- ================= RESULTADOS ================= -->
<section id="posiciones">
<h2>Resultados</h2>
<select id="categoriaSelect"></select>
<select id="fechaSelect"></select>

<table id="tablaResultados">
<thead><tr><th>Puesto</th><th>Piloto</th><th>Puntos</th></tr></thead>
<tbody></tbody>
</table>

<table id="tablaGeneral">
<thead><tr><th>Pos</th><th>Piloto</th><th>Total</th></tr></thead>
<tbody></tbody>
</table>
</section>

<!-- ================= INSCRIPCION ================= -->
<section id="inscripcion">
<h2>Inscripciones</h2>
<div class="card">
<p>Las inscripciones se realizan mediante el formulario oficial.</p>
<a class="btn" href="https://docs.google.com/forms" target="_blank">Ir al Formulario</a>
</div>
</section>

<!-- ================= ACLARACION ================= -->
<section id="aclaracion">
<div style="max-width:900px;margin:auto">
<h3>Nota Aclaratoria</h3>
<p>El ProKart Caletense no se hace responsable de los datos suministrados por la FRAD de Santa Cruz Zona Norte para la confecciÃ³n de los puntajes y estadÃ­sticas publicadas en esta aplicaciÃ³n.</p>
</div>
</section>

<!-- ================= INSTITUCIONAL ================= -->
<section class="institucional">
<h2>Instituciones que nos respaldan</h2>
<div class="logos-federaciones">
<img src="img/frad.png" alt="FRAD SCZN">
<img src="img/cda.png" alt="CDA">
<img src="img/aca.png" alt="ACA">
</div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="footer">
<div class="sponsors">
<img src="sponsors/vintage.png" alt="Vintage Motors 4T">
<img src="sponsors/caleta.png" alt="Repuestos Santiago">
<img src="sponsors/dany.png" alt="Dany Kart">
</div>
<p>Â© 2026 PROKART CALETENSE</p>
</footer>
<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSGhBGHo7TZ_jtqT0HXBvYaV3g1TYBN5lEfYfq2phY0vvHTEyVkTfrVy6RrotDcqVOxm5C4JX9CdTBp/pub?gid=368482217&single=true&output=csv";

let datos = [];

async function cargarDatos(){
  try{
    const res = await fetch(SHEET_URL);
    const text = await res.text();

    const filas = text.split("\n").map(f => f.split(","));
    const encabezados = filas[0].map(h => h.trim());

    const idxFecha = encabezados.indexOf("Fecha");
    const idxCategoria = encabezados.indexOf("Categoria");
    const idxPiloto = encabezados.indexOf("Piloto");
    const idxPuntos = encabezados.indexOf("Puntos Obtenidos");
    const idxNumero = encabezados.indexOf("Numero");

    datos = filas.slice(1).map(f=>{
      return {
        fecha: f[idxFecha]?.trim(),
        categoria: f[idxCategoria]?.trim(),
        piloto: f[idxPiloto]?.trim(),
        puntos: parseInt(f[idxPuntos]) || 0,
        numero: f[idxNumero]?.trim(),
        id: f[idxCategoria]?.trim() + "_" + f[idxNumero]?.trim()
      }
    }).filter(d=>d.fecha && d.categoria && d.piloto && d.numero);

    cargarCategorias();

  }catch(e){
    console.error("Error cargando datos:", e);
  }
}

function cargarCategorias(){
  const categorias = [...new Set(datos.map(d=>d.categoria))];
  const select = document.getElementById("categoriaSelect");
  select.innerHTML = categorias.map(c=>`<option value="${c}">${c}</option>`).join("");
  select.addEventListener("change", cargarFechas);
  cargarFechas();
}

function cargarFechas(){
  const categoria = document.getElementById("categoriaSelect").value;

  const fechas = [...new Set(
    datos.filter(d=>d.categoria===categoria).map(d=>d.fecha)
  )];

  const select = document.getElementById("fechaSelect");
  select.innerHTML = fechas.map(f=>`<option value="${f}">${f}</option>`).join("");
  select.addEventListener("change", mostrarResultados);
  mostrarResultados();
}

function mostrarResultados(){
  const categoria = document.getElementById("categoriaSelect").value;
  const fecha = document.getElementById("fechaSelect").value;

  const filtrados = datos
    .filter(d=>d.categoria===categoria && d.fecha===fecha)
    .sort((a,b)=>b.puntos-a.puntos);

  const tbody = document.querySelector("#tablaResultados tbody");
  tbody.innerHTML = "";

  filtrados.forEach((d,i)=>{
    tbody.innerHTML += `
      <tr>
        <td>${i+1}</td>
        <td>#${d.numero} - ${d.piloto}</td>
        <td>${d.puntos}</td>
      </tr>`;
  });

  mostrarGeneral(categoria);
}

function mostrarGeneral(categoria){
  const acumulado = {};

  datos
    .filter(d=>d.categoria===categoria)
    .forEach(d=>{
      acumulado[d.id] = acumulado[d.id] || {
        nombre: d.piloto,
        numero: d.numero,
        total: 0
      };
      acumulado[d.id].total += d.puntos;
    });

  const ranking = Object.values(acumulado)
    .sort((a,b)=>b.total-a.total);

  const tbody = document.querySelector("#tablaGeneral tbody");
  tbody.innerHTML = "";

  ranking.forEach((d,i)=>{
    tbody.innerHTML += `
      <tr>
        <td>${i+1}</td>
        <td>#${d.numero} - ${d.nombre}</td>
        <td>${d.total}</td>
      </tr>`;
  });
}

cargarDatos();
</script>

</body>
</html>
